<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quote Book - Stag City</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <link rel="apple-touch-icon" href="../favicon.svg">
    <link rel="stylesheet" href="../2.0 stylejourn.css">
    <style>
        /* Custom styles for quotebook notebook layout */
        
        #container {
            grid-template-columns: 241px 513px 241px;
            grid-template-rows: 50px 390px 390px 50px;
            padding: 20px 20px 20px 20px;
        }
        
        .navbar-window {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 1004.990px;
            height: 39px;
            padding: 3px;
            box-sizing: border-box;
            margin: 0 auto; /* center exactly like home/basement */
            position: absolute; /* match home positioning */
            top: 20px;
            left: 532px; /* revert 1px right */
            right: 548px;
            transform: translateX(-50%);
            background-color: #C0C0C0;
        }

        #navbar {
            background: linear-gradient(
                90deg,
                var(--dialog-blue),
                var(--dialog-blue-light)
            );
            display: flex;
            justify-content: center;
            gap: 15px;
            align-items: flex-end;
            padding-bottom: 4px;
            width: 998.99px;
            height: 33px;
            margin: 0;
            box-sizing: border-box;
            box-shadow: inset 0px 0px var(--window-frame),
                        inset 0px 0px var(--button-highlight),
                        var(--border-raised-inner);
        }

        .nav-button {
            background-color: #b0b0b0;
            color: #000000;
            text-decoration: none;
            font-size: 11px;
            font-family: 'ADDSBP', 'ADDSBP', sans-serif;
            font-weight: normal;
            display: flex;
            align-items: center;
            padding: 0 4px;
            margin: 0 4px;
            border: none;
            box-shadow: var(--border-raised-outer), var(--border-raised-inner);
            height: 23px;
            box-sizing: border-box;
            text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
        }

        .nav-button:hover {
            background-color: #a0a0a0;
            cursor: url('graphics/cursorselect.png'), pointer;
        }

        .nav-button img {
            width: 16px;
            height: 16px;
            margin-right: 4px;
        }

        .nav-button span {
            white-space: nowrap;
        }

        #navbar {
            background: linear-gradient(
                90deg,
                var(--dialog-blue),
                var(--dialog-blue-light)
            );
            display: flex;
            justify-content: center;
            gap: 15px;
            align-items: flex-end;
            padding-bottom: 4px;
            width: 998.99px;
            height: 33px;
            margin: 0;
            box-sizing: border-box;
            box-shadow: inset 0px 0px var(--window-frame),
                        inset 0px 0px var(--button-highlight),
                        var(--border-raised-inner);
        }
        
        .nav-button {
            background-color: #b0b0b0;
            color: #000000;
            text-decoration: none;
            font-size: 11px;
            font-family: 'ADDSBP', 'ADDSBP', sans-serif;
            font-weight: normal;
            display: flex;
            align-items: center;
            padding: 0 4px;
            margin: 0 4px;
            border: none;
            box-shadow: var(--border-raised-outer), var(--border-raised-inner);
            height: 23px;
            box-sizing: border-box;
            text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
        }

        .nav-button:hover {
            background-color: #a0a0a0;
            cursor: url('graphics/cursorselect.png'), pointer;
        }

        .nav-button img {
            width: 16px;
            height: 16px;
            margin-right: 4px;
        }

        .nav-button span {
            white-space: nowrap;
        }
        
        .areaJournal {
            background-image: url('../images/notebook.png');
            overflow: visible;
        }
        
        /* Remove sticky note background from sidebar */
        #sidebar .side {
            background-image: none;
        }
        
        .subjectJournal {
            position: relative;
            max-height: 700px;
            height: 700px;
            width: 900px; /* match site layout so navbar/footer alignment stays consistent */
            overflow-y: scroll;
            overflow-x: hidden;
        }
        
        .quote-book-header {
            position: absolute;
            top: 48px;
            left: 0;
            width: 360px;
            text-align: left;
        }
        
        .quote-book-header h1 {
            font-family: 'Illusion Serif Bold', serif;
            font-size: 18px;
            color: #0a0a0a;
            text-decoration: underline;
            line-height: 1.8;
            position: relative;
        }
        
        .quote-book-header p {
            position: relative;
            font-style: italic;
            color: #333;
            font-size: 10px;
            line-height: 1.8;
            top: 0;
        }
        
        .wisdom-section {
            position: absolute;
            top: 134px;
            left: 0;
            width: 360px;
            text-align: left;
        }
        
        .wisdom-section h2 {
            color: #0a0a0a;
            text-decoration: underline;
            font-family: 'Illusion Serif Bold', serif;
            font-size: 14px;
            line-height: 1.8;
            position: relative;
        }
        
        .wisdom-quote {
            position: relative;
            top: 0;
            font-style: italic;
            font-size: 10px;
            color: #0a0a0a;
            line-height: 1.8;
        }
        
        .wisdom-author {
            position: relative;
            top: 0;
            font-weight: bold;
            color: #0a0a0a;
            font-size: 10px;
            line-height: 1.8;
        }
        
        .refresh-btn {
            position: relative;
            top: 8px;
            background: none;
            border: none;
            cursor: pointer;
            font-family: 'Illusion Serif Reg', serif;
            display: inline-block;
            font-size: 8px;
            color: #0a0a0a;
            line-height: 1.8;
            text-decoration: underline;
            padding: 4px 8px;
            margin: 4px 0;
        }
        
        .refresh-btn:hover {
            color: #000080;
        }
        
        .refresh-btn:active {
            color: #000050;
        }
        
        .quotes-header {
            position: absolute;
            top: 50px;
            left: 380px;
            width: 340px;
        }
        
        .quotes-header h3 {
            color: #0a0a0a;
            text-decoration: underline;
            font-family: 'Illusion Serif Bold', serif;
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 10px;
        }
        
        .quote-grid {
            position: absolute;
            top:95px;
            left: 380px;
            width: 340px;
            overflow: visible;
        }
        
        .quote-card {
            position: relative;
            background-color: transparent;
            border: none;
            text-align: left;
            max-width: 340px;
            word-wrap: break-word;
            width: 100%;
            margin-bottom: 25px;
        }
        
        .description-section {
            position: absolute;
            top: 274px;
            left: 0;
            width: 360px;
            min-height: 240px; /* reserved space for future text */
        }
        
        #footer {
            position: relative;
            top: -20px;
        }
        
        .description-section h3 {
            color: #0a0a0a;
            text-decoration: underline;
            font-family: 'Illusion Serif Bold', serif;
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 10px;
        }
        
        .description-section textarea {
            width: 100%;
            height: 250px;
            background-color: transparent;
            border: none;
            font-family: 'Illusion Serif Reg', serif;
            font-size: 10px;
            line-height: 1.8;
            color: #0a0a0a;
            resize: none;
            outline: none;
        }
        
        .quote-card .quote-text {
            position: relative;
            font-size: 10px;
            line-height: 1.8;
            color: #0a0a0a;
            text-align: left;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .quote-card .quote-author {
            position: relative;
            top: 7.2px;
            left: 20px;
            font-weight: normal;
            color: #0a0a0a;
            font-size: 10px;
            line-height: 1.8;
            text-align: left;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .quote-card .quote-author span.date {
            color: #666;
        }
    </style>
</head>
<body>
    <div id="starfield-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -100;">
        <canvas id="starfield" style="width: 100%; height: 100%;"></canvas>
    </div>
    <script src="../js/starfield.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Optional runtime config: set window.SUPABASE_URL and window.SUPABASE_ANON_KEY in Vercel
        // or save them once in localStorage under the same names.
        (function initSupabaseClient(){
            const url = window.SUPABASE_URL || localStorage.getItem('SUPABASE_URL');
            const anon = window.SUPABASE_ANON_KEY || localStorage.getItem('SUPABASE_ANON_KEY');
            if (url && anon && window.supabase) {
                window.sb = window.supabase.createClient(url, anon);
            }
        })();
    </script>
    <script src="../js/global-player.js"></script>

    <div id="container" style="position: relative; z-index: 1; background-color: transparent;">

        <div class="navbar-window">
          <div id="navbar">
            <a href="../index.html" class="nav-button">
              <img src="../images/home window icon.png" alt="Home">
              <span>Home</span>
            </a>
            <a href="../about/index.html" class="nav-button">
              <img src="../images/about window icon.png" alt="About">
              <span>About</span>
            </a>
            <a href="../blog/index.html" class="nav-button">
              <img src="../images/writing window icon.png" alt="Blog">
              <span>Blog</span>
            </a>
            <a href="index.html" class="nav-button">
              <img src="../images/stag city window icon 2.png" alt="Quotebook">
              <span>Quotebook</span>
            </a>
            <a href="../other/index.html" class="nav-button">
              <img src="../images/other window icon.png" alt="Other">
              <span>Other</span>
            </a>
            <a href="../basement/index.html" class="nav-button"> 
              <img src="../images/basement window icon.png" alt="Basement">
              <span>Basement</span>
            </a>
          </div>
        </div>

        <div id="sidebar">
            <div class="side" id="deco"></div>
            <div style="height: 550px;" id="deco"></div>
        </div>

        <div id="journ">
            <div class="areaJournal">
                <div class="subjectJournal">
        <div class="quote-book-header">
                        <h1>The Quotebook</h1>
            <p>A collection of wisdom, thoughts, and memorable words</p>
        </div>
        
        <!-- Wisdom Quote Section -->
        <div class="wisdom-section">
            <h2>Today's Wisdom</h2>
            <div id="wisdomQuote" class="wisdom-quote">
                Loading wisdom...
            </div>
            <div id="wisdomAuthor" class="wisdom-author">
                - Loading author
            </div>
                        <a href="#" class="refresh-btn" onclick="refreshWisdom(); return false;">Get New Wisdom</a>
                    </div>
                    
                    <!-- Reserved description space (Left Page) -->
                    <div class="description-section"></div>
                    
                    <!-- Quotes Header (Right Page) -->
                    <div class="quotes-header">
                        <h3>Quotes</h3>
        </div>
        
                    <!-- Quote Grid (Right Page) -->
        <div class="quote-grid" id="quoteGrid">
            <!-- Quotes will be loaded here -->
        </div>
                </div>
            </div>
        </div>

        <footer id="footer">
            <div class="window">
              <div class="window-body">
                  <div class="status-bar">
                    <p class="status-bar-field"><a href="../sitemap.html">sitemap</a></p>
                    <p class="status-bar-field">This website is brought to you by: boredom.</p>
                    <p class="status-bar-field">Since Oct 27th, 2025</p>
                  </div>
              </div>
            </div>
          </footer>
    </div>

    <script>
        // Load quotes when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadQuoteBook();
            refreshWisdom();
        });

        // Function to get added quotes from server
        async function getAddedQuotes() {
            // Prefer direct Supabase if configured
            if (window.sb) {
                try {
                    const { data, error } = await window.sb
                        .from('quotes')
                        .select('*')
                        .order('created_at', { ascending: false });
                    if (error) throw error;
                    return data || [];
                } catch (e) {
                    console.warn('Supabase unavailable, falling back to API:', e);
                }
            }
            // Try legacy API
            try {
                const response = await fetch('/api/quotes');
                if (!response.ok) throw new Error('Server not available');
                return await response.json();
            } catch (error) {
                console.error('Error fetching added quotes:', error);
                // Fallback to localStorage
                return JSON.parse(localStorage.getItem('adminQuotes') || '[]');
            }
        }

        // Function to get wisdom quotes (the 20 pre-set quotes)
        function getWisdomQuotes() {
            return [
                {
                    quote: "Where you go, I go. I'll hold your hand in every world",
                    author: "Grendel Menz"
                },
                {
                    quote: "I don't know where you end and I begin",
                    author: "Shauna Shipman (YJ)"
                },
                {
                    quote: "The only way out is through",
                    author: "Robert Frost"
                },
                {
                    quote: "The best way to predict the future is to create it",
                    author: "Abraham Lincoln"
                },
                {
                    quote: "Be the person you needed when you were younger",
                    author: "Ayesha Siddiqi"
                },
                {
                    quote: "The journey of a thousand miles begins with one step.",
                    author: "Lao Tzu"
                },
                {
                    quote: "The only true wisdom is in knowing you know nothing.",
                    author: "Socrates"
                },
                {
                    quote: "What happens is not as important as how you react to what happens.",
                    author: "Unknown"
                },
                {
                    quote: "Success is walking from failure to failure with no loss of enthusiasm.",
                    author: "Winston Churchill"
                },
                {
                    quote: "If your actions inspire others to dream more, learn more, do more and become more, you are a leader.",
                    author: "John Quincy Adams"
                },
                {
                    quote: "That which does not kill us makes us stronger.",
                    author: "Friedrich Nietzsche"
                },
                {
                    quote: "Do not be afraid to give up the good to go for the great.",
                    author: "John D. Rockefeller"
                },
                {
                    quote: "Education is the most powerful weapon which you can use to change the world.",
                    author: "Nelson Mandela"
                },
                {
                    quote: "Be yourself; everyone else is already taken.",
                    author: "Oscar Wilde"
                },
                {
                    quote: "When the going gets rough â€“ turn to wonder.",
                    author: "Parker Palmer"
                },
                {
                    quote: "He who learns from everyone is wise.",
                    author: "Anonymous"
                },
                {
                    quote: "The unexamined life is not worth living.",
                    author: "Socrates"
                },
                {
                    quote: "Carpe diem.",
                    author: "Latin proverb"
                },
                {
                    quote: "The fool doth think he is wise, but the wise man knows himself to be a fool.",
                    author: "William Shakespeare"
                },
                {
                    quote: "Happiness is a choice.",
                    author: "Lolly Daskal"
                }
            ];
        }

        async function loadQuoteBook() {
            const quotes = await getAddedQuotes();
            const container = document.getElementById('quoteGrid');
            
            if (quotes.length === 0) {
                container.innerHTML = '<p style="font-style: italic; color: #666; font-size: 10px; line-height: 1.8;">No added quotes in the book yet.</p>';
                return;
            }
            
            container.innerHTML = quotes.map(q => `
                <div class="quote-card">
                    <div class="quote-text">"${q.quote}"</div>
                    <div class="quote-author">-${q.author} <span class="date">Date Added: ${q.date_added || 'Unknown'}</span></div>
                </div>
            `).join('');
        }

        function refreshWisdom() {
            const quotes = getWisdomQuotes();
            if (quotes.length === 0) {
                document.getElementById('wisdomQuote').textContent = 'No wisdom available yet.';
                document.getElementById('wisdomAuthor').textContent = '- Add some quotes first!';
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * quotes.length);
            const randomQuote = quotes[randomIndex];
            
            document.getElementById('wisdomQuote').textContent = `"${randomQuote.quote}"`;
            document.getElementById('wisdomAuthor').textContent = `- ${randomQuote.author}`;
        }

        // Auto-refresh wisdom every 30 seconds
        setInterval(refreshWisdom, 30000);
    </script>
</body>
</html>
